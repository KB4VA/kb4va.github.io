{"version":3,"sources":["app/components/Image.js","app/hooks/useImageSize.js","utils/inferColumnTypeFromData.js","database/loadDatabase.js","database/views.js","utils/queryRecommendations.js","utils/generateDataStructureFromFields.js","database/figures.js","store/index.js","app/hooks/useView.js","app/components/FigImage.js","app/views/FigureViewer/index.js","app/hooks/useFigure.js","app/views/QueryPanel/QueryItem.js","app/views/QueryPanel/DualSwitch.js","res/theme.js","res/const.js","res/index.js","res/strings.js","res/colors.js","app/views/QueryPanel/ItemSelect.js","app/views/QueryPanel/FieldCheckbox.js","app/views/QueryPanel/SpecInput.js","app/views/QueryPanel/index.js","app/components/ActionBox.js","app/views/RecommendationsPanel/Recommendation.js","app/views/RecommendationsPanel/index.js","app/components/Panel.js","app/components/AspectRatioKeeper.js","app/components/Waiting.js","app/views/Introduction.js","app/App.js","index.js"],"names":["useStyles","makeStyles","theme","image","overflow","width","height","display","justifyContent","alignItems","textAlign","flexWrap","loading","flex","lineHeight","imgBlock","position","props","img","transition","opacity","loaded","inject","observer","src","alt","className","onLoad","type","overlay","useState","setLoaded","cRef","useRef","useSize","cw","ch","nw","nh","setNaturalSize","setSize","useEffect","w","h","scale","Math","max","min","loadedImage","e","target","naturalWidth","naturalHeight","useImageSize","classes","clsx","ref","Typography","draggable","inferColumnTypeFromData","colData","field","lowerCaseField","toLowerCase","word","endsWith","isTimeField","d","isNaN","console","log","isAllNumber","diff","i","length","isOrderField","loadDatabase","path","initialData","data","current","isLoading","fetch","then","res","json","ensureLoading","handler","setTimeout","packageJson","homepage","viewMatchCondition","view","condition","isArray","spec","Array","compareSpec","specInCondition","specInView","match","allCondMatch","viewIndex","forEach","itemCondition","curCondMatch","itemView","index","indexOf","push","Object","keys","key","undefined","typeMatch","typeInCondition","typeInView","item","includes","typeMatchAll","specMatch","specItem","specification","typeInCondition1","typeInCondition2","item2","viewItem","item1","combineInCondition","typeMatchCombine","actions","targets","actionTargets","compositions","marks","channels","datas","dataTypes","aggregates","vis","task","sum","queryRecommendations","Promise","resolve","views","recommendations","isMatch","rankScore","viewId","queryViews","generateDataStructureFromFields","selectedFields","allFields","types","t","name","map","join","store","waiting","startWait","endWait","uploadData","input","document","createElement","accept","multiple","onchange","files","fileHandlers","_","fId","file","Papa","parse","header","complete","errors","err","code","row","pop","fileName","fields","meta","f","content","all","resetQueryParams","setData","fieldNames","flat","setFields","click","newData","newFields","setFieldType","isTableViewerOpen","showTableViewer","closeTableViewer","isReadMeOpen","handleReadMeOpen","handleReadMeClose","vegaSpecInter","JSON","stringify","setSpecInter","newValue","queryParams","isNonStructural","dataStructure","useSpec","setQueryParams","newParams","generateRecommendationsFromQueryParams","getViewData","figFile","viewFile","figBox","figCaption","figId","relationText","note","queryViewById","setRecommendations","newRecommendations","viewDetail","showViewDetail","initViewId","closeViewDetail","selectedViews","selectView","find","rec","setViews","newViews","removeView","filter","v","importViews","fr","FileReader","onload","result","importView","viewList","readAsText","exportViews","text","vId","blob","Blob","saveAs","figures","getFigureData","figs","fig","title","caption","viewIds","queryFigureById","makeAutoObservable","this","window","onbeforeunload","preventDefault","error","onunload","useView","x","y","setView","figImage","maxWidth","box","backgroundColor","alpha","palette","primary","main","FigImage","pos","left","top","Paper","elevation","style","figureViewer","padding","maxHeight","light","paddingTop","spacing","margin","bigImage","viewImage","imageLimitation","info","marginTop","paddingBottom","selected","boxShadow","dark","useTheme","select","figure","setFigure","useFigure","Dialog","open","onClose","fullWidth","DialogContent","variant","defaultLanguage","options","lineNumbers","readOnly","background","value","atArray","actionTarget","action","replace","split","beautifyActionTarget","onClick","solid","placeholder","flexBasis","flexGrow","flexDirection","shrinkable","flexShrink","minHeight","Item","children","React","primaryColor","scrollColor","R","strings","systemName","default","MuiAppBar","overrides","colorPrimary","color","MuiTypography","subtitle1","fontWeight","MuiCheckbox","MuiSwitch","MuiTooltip","tooltip","fontSize","whiteSpace","MuiCssBaseline","borderRadius","lighten","darken","const","consume","label","produce","search","query","Attributes","Graphs","colors","ItemSelect","onChange","twolevel","wrapper","createRef","TextField","SelectProps","renderValue","val","idx","findIndex","option","val2label","MenuItem","Checkbox","checked","ListItemText","l1","ListSubheader","memo","fieldCheckbox","border","shape","minWidth","selectInput","editable","onChangeType","setOpen","handleOpen","Button","size","noWrap","disabled","Select","onOpen","Input","fieldTypes","fT","FormControlLabel","control","Switch","selectOnLineNumbers","event","defaultValue","queryPanel","itemContainer","QueryItem","sort","a","b","endIcon","Refresh","actionBox","right","ActionBox","aId","IconButton","icon","recommendation","imagePreview","popover","pointerEvents","paper","popoverText","verticalAlign","marginLeft","anchorEl","setAnchorEl","handlePopoverClose","Boolean","Loupe","onDragStart","ev","dataTransfer","dropEffect","onMouseEnter","currentTarget","onMouseLeave","Popover","anchorOrigin","vertical","horizontal","transformOrigin","disableRestoreFocus","recommendationsPanel","paddingLeft","paddingRight","gridTemplateColumns","floor","gridTemplateRows","gap","panel","bottom","outerArea","innerContainer","transform","ratio","rootRef","getMaxBox","ctnW","ctnH","backdrop","zIndex","drawer","Backdrop","CircularProgress","DialogTitle","root","AppBar","Toolbar","component","bgColor","ReactDOM","render","StrictMode","createTheme","CssBaseline","getElementById"],"mappings":"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","file":"static/js/main.07206ee1.chunk.js","sourcesContent":["import React, {useRef, useState} from 'react';\r\nimport {makeStyles, Typography} from \"@material-ui/core\";\r\nimport {inject, observer} from \"mobx-react\";\r\nimport clsx from \"clsx\";\r\nimport useImageSize from \"../hooks/useImageSize\";\r\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    image: {\r\n        overflow: 'hidden',\r\n        width: '100%',\r\n        height: '100%', \r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        textAlign: 'center',\r\n        flexWrap: 'wrap',\r\n    },\r\n    loading: {\r\n        flex: '0 0 100%',\r\n        width: '100%',\r\n        textAlign: 'center',\r\n        height: '100%',\r\n        lineHeight: 10,\r\n    },\r\n    imgBlock: {\r\n        position: 'relative',\r\n        width: props => props.width || \"100%\",\r\n        height: props => props.height || \"100%\",\r\n    },\r\n    img: {\r\n        flex: '0 0 auto',\r\n        width: props => props.width || \"100%\",\r\n        height: props => props.height || \"100%\",\r\n        transition: 'opacity .3s linear',\r\n        \"&$loaded\": {\r\n            opacity: 1,\r\n        }\r\n    },\r\n    loaded: {},\r\n}));\r\n\r\nfunction Image({src, alt, className, onLoad, type = \"fill\", overlay, ...props}) {\r\n    const [loaded, setLoaded] = useState(false);\r\n\r\n    const cRef = useRef();\r\n    const {width, height, loadedImage} = useImageSize(type, cRef);\r\n\r\n    const classes = useStyles({width, height});\r\n    return <div className={clsx(classes.image, className)}\r\n                ref={cRef}>\r\n        {!loaded && <Typography className={classes.loading}>loading</Typography>}\r\n        <div className={classes.imgBlock}>\r\n            <LazyLoadImage src={src}\r\n                 alt={alt}\r\n                 draggable={false}\r\n                 className={clsx(classes.img, {\r\n                     [classes.loaded]: loaded\r\n                 })}\r\n                 onLoad={e => {\r\n                     setLoaded(true);\r\n                     loadedImage(e);\r\n                     onLoad && onLoad(e);\r\n                 }}\r\n                 {...props}/>\r\n                \r\n            {overlay}\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default inject()(observer(Image));\r\n","import {useSize} from \"ahooks\";\r\nimport {useEffect, useState} from \"react\";\r\n\r\nexport default function useImageSize(type, cRef) {\r\n    const {width: cw, height: ch} = useSize(cRef);\r\n    const [[nw, nh], setNaturalSize] = useState([0, 0]);\r\n    const [[width, height], setSize] = useState([cw, ch]);\r\n\r\n    useEffect(() => {\r\n        let w = cw, h = ch;\r\n        if (type === \"fill\") {\r\n            const scale = Math.max(cw / nw, ch / nh);\r\n            w = nw * scale;\r\n            h = nh * scale;\r\n        }\r\n        if (type === \"center\") {\r\n            const scale = Math.min(cw / nw, ch / nh);\r\n            w = nw * scale;\r\n            h = nh * scale;\r\n        }\r\n        if (type === \"fullHeight\") {\r\n            const scale = ch / nh;\r\n            w = nw * scale;\r\n            h = nh * scale;\r\n        }\r\n\r\n        setSize([w, h]);\r\n    }, [ch, cw, nh, nw, type])\r\n\r\n    const loadedImage = (e) => {\r\n        const nw = e.target.naturalWidth, nh = e.target.naturalHeight;\r\n        setNaturalSize([nw, nh]);\r\n    }\r\n\r\n    return {width, height, loadedImage};\r\n}\r\n","const isTimeField = (colData, field) => {\r\n    const timeWords = [\"year\", \"month\", \"day\", \"hour\", \"minute\", \"second\", \"date\", \"time\", \"timestamp\", \"timestamps\"];\r\n    const lowerCaseField = field.toLowerCase();\r\n    for (const word of timeWords) {\r\n        if (lowerCaseField.endsWith(word))\r\n            return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nconst isAllNumber = (colData, field) => {\r\n    for (const d of colData)\r\n        if (isNaN(d)) {\r\n            console.log(`Field ${field} has non-numerical data ${d}.`);\r\n            return false;\r\n        }\r\n    return true;\r\n}\r\n\r\nconst isOrderField = (colData, field) => {\r\n    const orderWords = [\"index\", \"idx\", \"id\", \"i\"];\r\n    const lowerCaseField = field.toLowerCase();\r\n    for (const word of orderWords) {\r\n        if (lowerCaseField.endsWith(word)) {\r\n            console.log(`Field ${field} is regarded as order field because of the field name includes ${word}.`);\r\n            return true;\r\n        }\r\n    }\r\n\r\n    const diff = colData[0];\r\n    for (let i = 1; i < colData.length; i++)\r\n        if (i + diff !== colData[i])\r\n            return false;\r\n\r\n    console.log(`Field ${field} is regarded as order field because the data is in order.`);\r\n    return true;\r\n}\r\n\r\nexport default function inferColumnTypeFromData(colData, field) {\r\n    if (isTimeField(colData, field)) return \"T\";\r\n    if (isAllNumber(colData, field)) {\r\n        if (isOrderField(colData, field)) return \"O\";\r\n        else return \"Q\";\r\n    }\r\n    return \"N\";\r\n}\r\n","export default function loadDatabase(path, initialData) {\r\n    const data = {\r\n        current: initialData,\r\n    };\r\n\r\n    let isLoading = true;\r\n    fetch(path)\r\n      .then(res => res.json())\r\n      .then(res => {\r\n          data.current = res;\r\n          isLoading = false;\r\n      });\r\n\r\n    const ensureLoading = handler => {\r\n        if (!isLoading) handler();\r\n        else {\r\n            setTimeout(() => ensureLoading(handler), 500);\r\n        }\r\n    }\r\n    return {data, ensureLoading}\r\n}\r\n","import loadDatabase from \"./loadDatabase\";\r\nimport packageJson from \"../../package.json\";\r\n\r\nconst {data, ensureLoading} = loadDatabase(`${packageJson.homepage}/knowledgeBase.json`, []);\r\n// const { data, ensureLoading } = loadDatabase(`${process.env.PUBLIC_URL}/knowledgeBase.json`, []);\r\n\r\nlet count = 1\r\n\r\nconst viewMatchCondition = (view, condition) => {\r\n\r\n\r\n    const isArray = (spec) =>{\r\n        return typeof (spec) == \"object\" && Array.isArray(spec)\r\n    }\r\n\r\n    const compareSpec = (specInCondition, specInView) => {\r\n        if (specInCondition === \"*\") return true\r\n        else if (specInView == specInCondition) return true\r\n        else if (typeof (specInView) != typeof (specInCondition)) return false\r\n        else if (typeof (specInView) == \"string\" && specInView != specInCondition) return false\r\n        // console.log(\"prev\", specInCondition, specInView)\r\n        let match = true\r\n\r\n        if (isArray(specInCondition) && isArray(specInView)){\r\n            let allCondMatch = true\r\n            let viewIndex = []\r\n            specInCondition.forEach((itemCondition) => {\r\n                if (allCondMatch){\r\n                    let curCondMatch = false\r\n                    specInView.forEach((itemView, index) => {\r\n                        if (viewIndex.indexOf(index) == -1 && !curCondMatch){\r\n                            if (compareSpec(itemCondition, itemView)){\r\n                                curCondMatch = true\r\n                                viewIndex.push(index)\r\n                            }\r\n                        }\r\n                    })\r\n                    if (!curCondMatch){\r\n                        allCondMatch = false\r\n                    }\r\n                }\r\n            })\r\n            return allCondMatch\r\n        }\r\n        else if (typeof (specInCondition) == \"object\"){\r\n            Object.keys(specInCondition).forEach((key) => {\r\n                if (specInView[key] == undefined) match = false\r\n                else if (match) match = compareSpec(specInCondition[key], specInView[key])\r\n            })\r\n        }\r\n        return match\r\n    }\r\n\r\n    const specMatch = (specInCondition, specInView) => {\r\n        if (specInCondition == {}) return true\r\n        let match = false\r\n        // compare current level\r\n        match = compareSpec(specInCondition, specInView)\r\n        // console.log(match)\r\n        if (match) return true\r\n        else if (typeof (specInView) == \"string\") return match\r\n        else if (isArray(specInView)){\r\n            specInView.forEach((specItem) => {\r\n                if (!match) match = specMatch(specInCondition, specItem)\r\n            })\r\n        }\r\n        else if (typeof (specInView) == \"object\") {\r\n            Object.keys(specInView).forEach((key) => {\r\n                if (!match) match = specMatch(specInCondition, specInView[key])\r\n            })\r\n        }\r\n        return match\r\n    }\r\n\r\n\r\n    const typeMatch = (typeInCondition, typeInView) => {\r\n        if (typeInCondition.length === 0) return true\r\n        let match = false\r\n        typeInCondition.forEach(item => {\r\n            // console.log(typeInView.includes(item))\r\n            if (typeInView.includes(item)) match = true;\r\n        })\r\n        return match;\r\n    }\r\n\r\n    const typeMatchAll = (typeInCondition, typeInView) => {\r\n        if (typeInCondition.length === 0) return true\r\n        let match = true\r\n        typeInCondition.forEach(item => {\r\n            // console.log(typeInView.includes(item))\r\n            if (!typeInView.includes(item)) match = false\r\n        })\r\n        return match;\r\n    }\r\n\r\n    const typeMatchCombine = (typeInCondition1, typeInCondition2, typeInView) => {\r\n        let match = false\r\n        if (typeInCondition1.length === 0 && typeInCondition2.length === 0) {\r\n            match = true\r\n        }\r\n        else if (typeInCondition1.length === 0) {\r\n            typeInCondition2.forEach(item2 => {\r\n                typeInView.forEach(viewItem => {\r\n                    if (viewItem.includes(item2)) match = true\r\n                })\r\n            })\r\n        }\r\n        else if (typeInCondition2.length === 0) {\r\n            typeInCondition1.forEach(item1 => {\r\n                typeInView.forEach(viewItem => {\r\n                    if (viewItem.includes(item1)) match = true\r\n                })\r\n            })\r\n        }\r\n        else {\r\n            typeInCondition1.forEach(item1 => {\r\n                typeInCondition2.forEach(item2 => {\r\n                    const combineInCondition = `${item1}:${item2}`\r\n                    if (typeInView.includes(combineInCondition)) match = true\r\n                })\r\n            })\r\n        }\r\n        return match;\r\n    }\r\n\r\n\r\n    let match = specMatch(condition.specification, view.specification)\r\n    if (!match) return [false, {\r\n        vis: 0,\r\n        task: 0,\r\n        data: 0,\r\n        sum: 0,\r\n    }]\r\n\r\n    match = typeMatchCombine(condition.actions,\r\n        condition.targets,\r\n        view.actionTargets);\r\n    if (!match) return [false, {\r\n        vis: 0,\r\n        task: 0,\r\n        data: 0,\r\n        sum: 0,\r\n    }]\r\n\r\n    match = typeMatch(condition.compositions, view.compositions);\r\n    if (!match) return [false, {\r\n        vis: 0,\r\n        task: 0,\r\n        data: 0,\r\n        sum: 0,\r\n    }]\r\n\r\n    match = typeMatchAll(condition.marks, view.marks);\r\n    if (!match) return [false, {\r\n        vis: 0,\r\n        task: 0,\r\n        data: 0,\r\n        sum: 0,\r\n    }]\r\n\r\n    match = typeMatch(condition.channels, view.channels);\r\n    if (!match) return [false, {\r\n        vis: 0,\r\n        task: 0,\r\n        data: 0,\r\n        sum: 0,\r\n    }]\r\n\r\n    match = typeMatchAll(condition.datas, view.dataTypes);\r\n    if (!match) return [false, {\r\n        vis: 0,\r\n        task: 0,\r\n        data: 0,\r\n        sum: 0,\r\n    }]\r\n\r\n    match = typeMatch(condition.aggregates, view.aggregates);\r\n    if (!match) return [false, {\r\n        vis: 0,\r\n        task: 0,\r\n        data: 0,\r\n        sum: 0,\r\n    }]\r\n\r\n\r\n\r\n    // const visMatchNum = typeMatchNum(condition.visType, view.figVis);\r\n    // if (visMatchNum > 0) found = true\r\n\r\n    return [true, {\r\n        vis: 0,\r\n        task: 0,\r\n        data: 0,\r\n        sum: 0,\r\n    }]\r\n}\r\n\r\n\r\n\r\n\r\nconst queryViews = condition => new Promise(resolve => {\r\n    ensureLoading(() => {\r\n        const views = data.current;\r\n\r\n        console.log(data.current);\r\n\r\n        const recommendations = [];\r\n\r\n        views.forEach(view => {\r\n            const [isMatch, rankScore] = viewMatchCondition(view, condition);\r\n            if (isMatch)\r\n                recommendations.push({\r\n                    viewId: view.viewId,\r\n                    rankScore,\r\n                })\r\n        })\r\n\r\n        resolve(recommendations);\r\n    });\r\n})\r\n\r\nconst queryViewById = viewId => new Promise(resolve => {\r\n    ensureLoading(() => {\r\n        const views = data.current;\r\n\r\n        for (const view of views)\r\n            if (view.viewId === viewId)\r\n                resolve({\r\n                    viewId,\r\n                    figFile: `https://github.com/VIS-VAID/data/blob/main/figures/systems/${view.figFile}?raw=true`,\r\n                    viewFile: `https://github.com/VIS-VAID/data/blob/main/figures/views/${view.viewFile}?raw=true`,\r\n                    specification: view.specification,\r\n                    actionTargets: view.actionTargets,\r\n                    compositions: view.compositions,\r\n                    marks: view.marks,\r\n                    channels: view.channels,\r\n                    dataTypes: view.dataTypes,\r\n                    aggregates: view.aggregates,\r\n                    figBox: view.figBox,\r\n                    figCaption: view.figCaption,\r\n                    figId: view.figId,\r\n                    relationText: view.relationText,\r\n                    note: view.note,\r\n                });\r\n    });\r\n});\r\n\r\nexport { queryViews, queryViewById };\r\n","import {queryViews} from \"../database/views\";\r\n\r\nexport default function queryRecommendations(condition) {\r\n    return new Promise(resolve => {\r\n        // if we have a backend, replace this with fetch API and move the database into the backend\r\n        queryViews(condition)\r\n          .then(res => resolve(res));\r\n    })\r\n}\r\n","export default function generateDataStructureFromFields(selectedFields, allFields) {\r\n    const types = {};\r\n\r\n    const addType = t => {\r\n        if (!types[t]) types[t] = 0;\r\n        types[t]++;\r\n    }\r\n\r\n    allFields.forEach(field => {\r\n        if (selectedFields.includes(field.name))\r\n            addType(field.type);\r\n    });\r\n\r\n    return Object.keys(types).map(t => `${t}${types[t]}`).join(\" \");\r\n}\r\n","import loadDatabase from \"./loadDatabase\";\r\nimport packageJson from \"../../package.json\";\r\n\r\nconst {data, ensureLoading} = loadDatabase(`${packageJson.homepage}/figKnowledgeBase.json`);\r\n// const {data, ensureLoading} = loadDatabase(`${process.env.PUBLIC_URL}/figKnowledgeBase.json`);\r\n\r\nconst queryFigureById = figId => new Promise(resolve => {\r\n    ensureLoading(() => {\r\n        const figs = data.current;\r\n\r\n        for (const fig of figs)\r\n            if (fig.figId === figId)\r\n                resolve({\r\n                    figId,\r\n                    title: fig.title,\r\n                    caption: fig.caption,\r\n                    viewIds: fig.viewIds,\r\n                });\r\n    });\r\n});\r\n\r\nexport {queryFigureById};\r\n","import { makeAutoObservable } from \"mobx\";\r\nimport Papa from \"papaparse\";\r\nimport inferColumnTypeFromData from \"../utils/inferColumnTypeFromData\";\r\nimport queryRecommendations from \"../utils/queryRecommendations\";\r\nimport generateDataStructureFromFields from \"../utils/generateDataStructureFromFields\";\r\nimport { queryViewById } from \"../database/views\";\r\nimport { queryFigureById } from \"../database/figures\";\r\nimport { saveAs } from 'file-saver';\r\n\r\nclass Store {\r\n    constructor() {\r\n        makeAutoObservable(this);\r\n        window.onbeforeunload = (e) => {\r\n            e.preventDefault();\r\n            console.error(e);\r\n        }\r\n        window.onunload = e => {\r\n            e.preventDefault();\r\n            console.error(e);\r\n        }\r\n        this.generateRecommendationsFromQueryParams();\r\n    }\r\n\r\n    waiting = false;\r\n    startWait = () => this.waiting = true;\r\n    endWait = () => this.waiting = false;\r\n\r\n    data = [];\r\n    uploadData = () => {\r\n        const input = document.createElement(\"input\");\r\n        input.type = \"file\";\r\n        input.accept = \".csv\";\r\n        input.multiple = true;\r\n        input.onchange = () => {\r\n            const handleData = file => new Promise(resolve => {\r\n                Papa.parse(file, {\r\n                    header: true,\r\n                    complete: res => {\r\n                        res.errors.forEach(err => {\r\n                            if (err.code === \"TooFewFields\" && err.row === res.data.length - 1) // the last line is empty\r\n                                res.data.pop();\r\n                        });\r\n                        resolve({\r\n                            fileName: file.name,\r\n                            fields: res.meta.fields.map(f => ({\r\n                                type: inferColumnTypeFromData(res.data.map(d => d[f]), f),\r\n                                name: f,\r\n                            })),\r\n                            content: res.data,\r\n                        });\r\n                    }\r\n                })\r\n            });\r\n            const files = input.files;\r\n            const fileHandlers = [...new Array(files.length)].map((_, fId) => handleData(files[fId]));\r\n\r\n            Promise.all(fileHandlers)\r\n                .then(res => {\r\n                    this.resetQueryParams();\r\n                    this.setData(res);\r\n\r\n                    const fields = [];\r\n                    const fieldNames = [];\r\n                    res.map(res => res.fields)\r\n                        .flat()\r\n                        .forEach(field => {\r\n                            if (fieldNames.includes(field.name)) return;\r\n                            fields.push(field);\r\n                            fieldNames.push(field.name);\r\n                        })\r\n                    this.setFields(fields);\r\n                })\r\n        }\r\n        input.click();\r\n    }\r\n    setData = newData => this.data = newData;\r\n\r\n    fields = [];\r\n    setFields = newFields => this.fields = newFields;\r\n    setFieldType = (field, type) => this.fields.forEach(f => (f.name === field) && (f.type = type));\r\n\r\n    isTableViewerOpen = false;\r\n    showTableViewer = () => this.isTableViewerOpen = true;\r\n    closeTableViewer = () => this.isTableViewerOpen = false;\r\n\r\n    isReadMeOpen = true\r\n    handleReadMeOpen = () => this.isReadMeOpen = true;\r\n    handleReadMeClose = () => this.isReadMeOpen = false;\r\n\r\n\r\n    \r\n    vegaSpecInter = JSON.stringify({\r\n        \"x\": {\r\n            \"type\":\"*\"\r\n        },\r\n        \"y\": {\r\n            \"type\":\"*\"\r\n        }\r\n    }, null, 4);\r\n    // vegaSpecInter = JSON.stringify({facet: {},spec:{\r\n    //     \"mark\": \"bar\",\r\n    //     \"encoding\": {\r\n    //         \"x\": \"*\"\r\n    //     }\r\n    // }}, null, 4);\r\n\r\n    setSpecInter = (newValue) => {\r\n        this.vegaSpecInter = newValue\r\n    }\r\n\r\n    queryParams = {\r\n        fields: [],\r\n        isNonStructural: true,\r\n        dataStructure: \"\",\r\n        actions: [],\r\n        targets: [],\r\n        compositions: [],\r\n        marks: [],\r\n        channels: [],\r\n        dataTypes: [],\r\n        aggregates: [],\r\n        useSpec: false,\r\n        specification: {}\r\n\r\n    }\r\n    setQueryParams = newParams => {\r\n        this.queryParams = { ...this.queryParams, ...newParams };\r\n        if (this.queryParams.isNonStructural)\r\n            this.queryParams.dataStructure = generateDataStructureFromFields(\r\n                this.queryParams.fields,\r\n                this.fields,\r\n            )\r\n    }\r\n    resetQueryParams = () => {\r\n        this.setQueryParams({\r\n            fields: [],\r\n            isNonStructural: true,\r\n            dataStructure: \"\",\r\n            actions: [],\r\n            targets: [],\r\n            compositions: [],\r\n            marks: [],\r\n            channels: [],\r\n            dataTypes: [],\r\n            aggregates: [],\r\n            useSpec: false,\r\n            specification: {}\r\n        })\r\n        this.vegaSpecInter = JSON.stringify({\r\n            \"x\": {\r\n                \"type\":\"*\"\r\n            },\r\n            \"y\": {\r\n                \"type\":\"*\"\r\n            }\r\n        }, null, 4);\r\n        this.generateRecommendationsFromQueryParams();\r\n    }\r\n\r\n    views = {};\r\n    getViewData = viewId => new Promise(resolve => {\r\n        if (this.views[viewId]) {\r\n            resolve(this.views[viewId]);\r\n            return;\r\n        }\r\n\r\n        queryViewById(viewId)\r\n            .then(res => {\r\n                this.views[viewId] = res;\r\n                resolve(res);\r\n            })\r\n    })\r\n\r\n    recommendations = [];\r\n    setRecommendations = newRecommendations => this.recommendations = newRecommendations;\r\n    generateRecommendationsFromQueryParams = () => {\r\n        this.startWait();\r\n        const condition = {\r\n            \"actions\": this.queryParams.actions,\r\n            \"targets\": this.queryParams.targets,\r\n            \"compositions\": this.queryParams.compositions,\r\n            \"marks\": this.queryParams.marks,\r\n            \"channels\": this.queryParams.channels,\r\n            \"datas\": this.queryParams.dataTypes,\r\n            \"aggregates\": this.queryParams.aggregates\r\n        };\r\n        if (this.queryParams.useSpec) {\r\n            try {\r\n                condition.specification = JSON.parse(this.vegaSpecInter);\r\n            } catch (e) {\r\n                condition.specification = this.queryParams.specification\r\n            }\r\n        }\r\n        else{\r\n            condition.specification = this.queryParams.specification\r\n        }\r\n        // console.log(condition)\r\n        queryRecommendations(condition).then(res => {\r\n            this.endWait();\r\n            // console.log(res)\r\n            // res.sort((a, b) => b.rankScore.sum - a.rankScore.sum);\r\n            this.setRecommendations(res.map(d => ({ ...d, condition })));\r\n        })\r\n    }\r\n\r\n    viewDetail = null;\r\n    showViewDetail = (figId, initViewId) => this.viewDetail = { figId, initViewId };\r\n    closeViewDetail = () => this.viewDetail = null;\r\n\r\n    selectedViews = [];\r\n    selectView = viewId => {\r\n        this.getViewData(viewId)\r\n            .then(view => {\r\n                let condition = this.recommendations.find(rec => rec.viewId === viewId).condition;\r\n                this.selectedViews.push({\r\n                    viewId,\r\n                    figId: view.figId,\r\n                    viewFile: view.viewFile,\r\n                    // layout: JSON.parse(JSON.stringify(view.figBox)),\r\n                    condition,\r\n                });\r\n            })\r\n    }\r\n    setViews = newViews => this.selectedViews = newViews;\r\n    removeView = viewId => this.selectedViews = this.selectedViews.filter(v => v.viewId !== viewId);\r\n    // changePos = (viewId, newPos) => {\r\n    //     console.log(viewId, newPos);\r\n    //     this.selectedViews.forEach(v => {\r\n    //         if (v.viewId !== viewId) return;\r\n    //         v.layout = {...v.layout, ...newPos};\r\n    //     })\r\n    // };\r\n    // exportLayout = () => {\r\n    //     Promise.all(this.selectedViews.map(v => this.getViewData(v.viewId)))\r\n    //       .then(views => {\r\n    //           const text = JSON.stringify(this.selectedViews.map((v, vId) => {\r\n    //               return {\r\n    //                   view: views[vId].viewFile,\r\n    //                   layout: v.layout,\r\n    //               }\r\n    //           }));\r\n    //           const blob = new Blob([text], {type: \"text/plain;charset=utf-8\"});\r\n    //           saveAs(blob, \"layout.json\");\r\n    //       });\r\n    // }\r\n    importViews = () => {\r\n        const input = document.createElement(\"input\");\r\n        input.type = \"file\";\r\n        input.accept = \".json\";\r\n        input.onchange = () => {\r\n            const file = input.files[0];\r\n            if (!file) return;\r\n\r\n            const fr = new FileReader();\r\n            fr.onload = e => {\r\n                const res = JSON.parse(e.target.result);\r\n                Promise.all(res.map(importView => new Promise(resolve => {\r\n                    this.getViewData(importView.view)\r\n                        .then(view => {\r\n                            resolve({\r\n                                viewId: importView.view,\r\n                                figId: view.figId,\r\n                                viewFile: view.viewFile,\r\n                                condition: importView.condition,\r\n                            })\r\n                        })\r\n                })))\r\n                    .then(viewList => this.setViews(viewList))\r\n            }\r\n            fr.readAsText(file, \"utf-8\");\r\n        }\r\n        input.click();\r\n    }\r\n    exportViews = () => {\r\n        Promise.all(this.selectedViews.map(v => this.getViewData(v.viewId)))\r\n            .then(views => {\r\n                const text = JSON.stringify(this.selectedViews.map((v, vId) => {\r\n                    return {\r\n                        view: views[vId].viewId,\r\n                        // layout: v.layout,\r\n                        condition: v.condition,\r\n                    }\r\n                }));\r\n                const blob = new Blob([text], { type: \"text/plain;charset=utf-8\" });\r\n                saveAs(blob, \"views.json\");\r\n            });\r\n    }\r\n\r\n    figures = {};\r\n    getFigureData = figId => new Promise(resolve => {\r\n        if (this.figures[figId]) {\r\n            resolve(this.figures[figId]);\r\n            return;\r\n        }\r\n\r\n        queryFigureById(figId)\r\n            .then(res => {\r\n                this.figures[figId] = res;\r\n                resolve(res);\r\n            })\r\n    });\r\n}\r\n\r\nconst store = new Store();\r\nexport default store;\r\n","import {useEffect, useState} from \"react\";\r\nimport store from \"../../store\";\r\n\r\nexport default function useView(viewId) {\r\n    const [view, setView] = useState({\r\n        viewId,\r\n        figFile: \"\",\r\n        viewFile: \"\",\r\n        specification: \"\",\r\n        actionTargets:[],\r\n        compositions: [],\r\n        marks: [],\r\n        channels: [],\r\n        dataTypes:[],\r\n        aggregates: [],\r\n        figBox: {x: 0, y: 0, width: 0, height: 0},\r\n        figCaption: \"\",\r\n        figId: \"\",\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (!viewId) return;\r\n        store.getViewData(viewId)\r\n          .then(res => {\r\n              setView(res);\r\n          });\r\n    }, [viewId]);\r\n\r\n    return view;\r\n}\r\n","import React from 'react';\r\nimport {alpha, makeStyles, Paper} from \"@material-ui/core\";\r\nimport Image from \"./Image\";\r\nimport useView from \"../hooks/useView\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    figImage: {\r\n        height: '100%',\r\n        // width: 'fit-content',\r\n        maxWidth: '100%',\r\n        position: 'relative',\r\n    },\r\n    figFile: {\r\n        height: '100%',\r\n        width: '100%',\r\n    },\r\n    box: {\r\n        position: 'absolute',\r\n        backgroundColor: alpha(theme.palette.primary.main, 0.8),\r\n    }\r\n}));\r\n\r\nfunction FigImage({viewId, onLoad, type = \"fill\", ...props}) {\r\n    const classes = useStyles();\r\n\r\n    const view = useView(viewId);\r\n\r\n    const pos = (() => {\r\n        const {x, y, width, height} = view.figBox;\r\n        return {\r\n            left: `${x * 100}%`,\r\n            top: `${y * 100}%`,\r\n            width: `${width * 100}%`,\r\n            height: `${height * 100}%`,\r\n        };\r\n    })();\r\n\r\n    return <Paper className={classes.figImage} elevation={4}>\r\n        <Image src={view.figFile} alt={view.figFile}\r\n                // view={view}\r\n                // viewId={viewId}\r\n                // verbose = {props.verbose}\r\n               className={classes.figFile}\r\n               onLoad={onLoad}\r\n               type={type}\r\n               overlay={<div className={classes.box} style={pos}/>}\r\n               {...props}/>\r\n    </Paper>\r\n}\r\n\r\nexport default FigImage;\r\n","import React from 'react';\r\nimport { Dialog, DialogContent, makeStyles, Typography} from \"@material-ui/core\";\r\nimport { useTheme } from '@material-ui/styles';\r\nimport { inject, observer } from \"mobx-react\";\r\nimport Editor from \"@monaco-editor/react\";\r\nimport FigImage from \"../../components/FigImage\";\r\nimport Image from \"../../components/Image\";\r\nimport useFigure from \"../../hooks/useFigure\";\r\nimport useView from \"../../hooks/useView\";\r\nimport clsx from \"clsx\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    figureViewer: {\r\n        padding: 0,\r\n        height: 800,\r\n        maxHeight: '80vh',\r\n        backgroundColor: theme.palette.primary.light,\r\n        overflow: 'hidden',\r\n        '&:first-child': {\r\n            paddingTop: 0,\r\n        }\r\n    },\r\n    top: {\r\n        height: `calc(100% - ${200 + theme.spacing(3)}px)`,\r\n        display: 'flex',\r\n        margin: theme.spacing(1, 2),\r\n        overflow: \"hidden\",\r\n    },\r\n    bigImage: {\r\n        width: `calc(100% - ${500 + theme.spacing(3)}px)`,\r\n        flex: `1 1 0`,\r\n        overflow: 'hidden',\r\n        padding: theme.spacing(1, 1, 1, 1),\r\n    },\r\n    viewImage: {\r\n    },\r\n    imageLimitation: {\r\n        width: props => props.width,\r\n        height: props => props.height,\r\n    },\r\n    spec: {\r\n        height: `calc(100% - ${theme.spacing(1)}px)`,\r\n        width: 300,\r\n        flex: `0 0 500px`,\r\n        padding: theme.spacing(2, 1, 1, 1),\r\n        overflow: \"hidden\",\r\n    },\r\n    info: {\r\n        height: `calc(100% - ${theme.spacing(1)}px)`,\r\n        width: 200,\r\n        flex: `0 0 350px`,\r\n        padding: theme.spacing(1, 1, 1, 1),\r\n        overflow: \"hidden auto\",\r\n    },\r\n    title: {\r\n        height: '30px'\r\n    },\r\n    text: {\r\n        '& + $title': {\r\n            marginTop: theme.spacing(1),\r\n        }\r\n    },\r\n    viewList: {\r\n        flex: '0 0 200px',\r\n        height: 200,\r\n        display: 'flex',\r\n        overflow: 'scroll hidden',\r\n        paddingBottom: theme.spacing(1),\r\n        margin: theme.spacing(0, 1)\r\n    },\r\n    view: {\r\n        flex: '0 0 auto',\r\n        margin: theme.spacing(0.5, 1),\r\n    },\r\n    selected: {\r\n        boxShadow: `0 0 2px 2px ${theme.palette.primary.dark}`,\r\n    }\r\n}));\r\n\r\nfunction FigureViewer({ store }) {\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n\r\n    const { title, caption, viewIds, selected, select } = useFigure(store.viewDetail);\r\n    const view = useView(viewIds[selected]);\r\n    \r\n    const beautifyActionTarget = (actionTargets) =>{\r\n        let atArray = []\r\n        actionTargets.forEach((actionTarget) => {\r\n            const action = actionTarget.replace(\"produce\",\"produce-produce\").split(\":\")[0].split(\"-\")[1]\r\n            const target = actionTarget.split(\":\")[1].split(\"-\")[1]\r\n            atArray.push(`${action} ${target}`)\r\n        })\r\n        return atArray.join(\", \")\r\n    }\r\n\r\n    // console.log(viewIds[selected], selected)\r\n\r\n    return <Dialog open={store.viewDetail !== null}\r\n        onClose={store.closeViewDetail}\r\n        maxWidth={\"xl\"}\r\n        fullWidth>\r\n        <DialogContent className={classes.figureViewer}>\r\n            <div className={classes.top}>\r\n                <div className={classes.bigImage}>\r\n                    {/* <FigImage key={`bigimg-${viewIds[selected]}`} viewId={viewIds[selected]} type={\"center\"} /> */}\r\n                    <Image className={classes.viewImage} src={view.viewFile} alt={view.viewFile} type={\"center\"}/>\r\n                </div>\r\n                <div className={classes.spec}>\r\n                    <Typography className={classes.title} variant={\"subtitle1\"}>Specification</Typography>\r\n                    <Editor\r\n                        defaultLanguage=\"json\"\r\n                        options={{\r\n                            lineNumbers: false,\r\n                            readOnly: true,\r\n                            background: theme.palette.primary.light,\r\n                        }}\r\n                        value={JSON.stringify(view.specification, null, 4)}\r\n                        style={{height: '100%'}}\r\n                    />\r\n                </div>\r\n                <div className={classes.info}>\r\n\r\n                    <Typography className={classes.title} variant={\"subtitle1\"}>Title</Typography>\r\n                    <Typography className={classes.text}\r\n                        title={title}>{title}</Typography>\r\n\r\n                    <Typography className={classes.title} variant={\"subtitle1\"}>Action-Target Pairs</Typography>\r\n                    <Typography className={classes.text}\r\n                        title={view.actionTargets.join(\", \")}>{beautifyActionTarget(view.actionTargets)}</Typography>\r\n\r\n                    <Typography className={classes.title} variant={\"subtitle1\"}>Compositions</Typography>\r\n                    <Typography className={classes.text}\r\n                        title={view.compositions.join(\", \")}>{view.compositions.join(\", \")}</Typography>\r\n\r\n                    <Typography className={classes.title} variant={\"subtitle1\"}>Mark Types</Typography>\r\n                    <Typography className={classes.text}\r\n                        title={view.marks.join(\", \")}>{view.marks.join(\", \")}</Typography>\r\n\r\n\r\n                    <Typography className={classes.title} variant={\"subtitle1\"}>Data Types</Typography>\r\n                    <Typography className={classes.text}\r\n                        title={view.dataTypes.join(\", \")}>{view.dataTypes.join(\", \")}</Typography>\r\n                    <Typography className={classes.title} variant={\"subtitle1\"}>Channels</Typography>\r\n                    <Typography className={classes.text}\r\n                        title={view.channels.join(\", \")}>{view.channels.join(\", \")}</Typography>\r\n                    \r\n                    <Typography className={classes.title} variant={\"subtitle1\"}>Aggregates</Typography>\r\n                    <Typography className={classes.text}\r\n                        title={view.aggregates.join(\", \")}>{view.aggregates.join(\", \")}</Typography>\r\n\r\n                    <Typography className={classes.title} variant={\"subtitle1\"}>Caption</Typography>\r\n                    <Typography className={classes.text}\r\n                        title={caption}>{caption}</Typography>\r\n                </div>\r\n            </div>\r\n            <div className={classes.viewList}>\r\n                {viewIds.map((viewId, vId) => <div key={viewId}\r\n                    className={clsx(classes.view, {\r\n                        [classes.selected]: vId === selected,\r\n                    })}\r\n                    onClick={() => select(vId)}>\r\n                    <FigImage key={viewId} viewId={viewId} type={\"fullHeight\"} />\r\n                </div>)}\r\n            </div>\r\n        </DialogContent>\r\n    </Dialog>\r\n}\r\n\r\nexport default inject('store')(observer(FigureViewer));\r\n","import {useEffect, useState} from \"react\";\r\nimport store from \"../../store\";\r\n\r\nexport default function useFigure(props) {\r\n    const [selected, select] = useState(0);\r\n\r\n    const [figure, setFigure] = useState({\r\n        title: \"\",\r\n        caption: \"\",\r\n        viewIds: [],\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (!props) return;\r\n        const {figId, initViewId} = props;\r\n        store.getFigureData(figId)\r\n          .then(res => {\r\n              setFigure(res);\r\n              res.viewIds.forEach((viewId, vId) => {\r\n                  if (viewId === initViewId) {\r\n                      select(vId);\r\n                  }\r\n              })\r\n          });\r\n    }, [props])\r\n\r\n    return {\r\n        ...figure,\r\n        selected,\r\n        select,\r\n    };\r\n}\r\n","import React from \"react\";\r\nimport {makeStyles, Typography} from \"@material-ui/core\";\r\nimport clsx from \"clsx\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    item: {\r\n        width: '100%',\r\n        display: \"flex\",\r\n        flexWrap: 'wrap',\r\n        margin: theme.spacing(0.5, 0),\r\n        justifyContent: 'space-between'\r\n    },\r\n    solid: {\r\n        flex: 0,\r\n    },\r\n    placeholder: {\r\n        flexBasis: 0,\r\n        flexGrow: 1,\r\n        flexDirection: 'column',\r\n    },\r\n    shrinkable: {\r\n        flexBasis: 'auto',\r\n        flexShrink: 1,\r\n        minHeight: 24,\r\n        overflow: \"hidden auto\",\r\n    },\r\n    action: {\r\n        justifyContent: 'center',\r\n        flexWrap: 'nowrap',\r\n    }\r\n}))\r\n\r\nfunction Item({\r\n                  children,\r\n                  solid = true,\r\n                  placeholder = false,\r\n                  shrinkable = false,\r\n                  action = false,\r\n                  title = null,\r\n              }) {\r\n    const classes = useStyles();\r\n\r\n    return <div className={clsx(\r\n      classes.item,\r\n      {\r\n          [classes.solid]: solid,\r\n          [classes.placeholder]: placeholder,\r\n          [classes.shrinkable]: shrinkable,\r\n          [classes.action]: action,\r\n      }\r\n    )}>\r\n        {title && <Typography variant={\"subtitle1\"}>{title}</Typography>}\r\n        {children}\r\n    </div>\r\n}\r\n\r\nexport default Item;\r\n","import React from 'react';\r\nimport {Grid, Switch, Typography} from \"@material-ui/core\";\r\n\r\nfunction DualSwitch({left, right, ...props}) {\r\n    return <Typography component=\"div\" noWrap>\r\n        <Grid component=\"label\" container alignItems=\"center\" spacing={1}>\r\n            <Grid item>{left}</Grid>\r\n            <Grid item>\r\n                <Switch color={\"primary\"} {...props}/>\r\n            </Grid>\r\n            <Grid item>{right}</Grid>\r\n        </Grid>\r\n    </Typography>\r\n}\r\n\r\nexport default React.memo(DualSwitch);\r\n","import {alpha, darken, lighten} from \"@material-ui/core\";\r\nconst primaryColor = \"rgb(20, 90, 140)\";\r\nconst scrollColor = \"rgb(36, 40, 41)\";\r\nconst theme = {\r\n    palette: {\r\n        primary: {\r\n            light: 'rgb(239, 250, 254)',\r\n            main: 'rgb(212, 231, 245)',\r\n            dark: primaryColor,\r\n        },\r\n        background: {\r\n            default: 'rgb(239, 250, 254)',\r\n        }\r\n    },\r\n    props: {\r\n        MuiAppBar: {\r\n            elevation: 1,\r\n        }\r\n    },\r\n    overrides: {\r\n        MuiAppBar: {\r\n            colorPrimary: {\r\n                backgroundColor: primaryColor,\r\n                color: '#ffffff',\r\n            },\r\n        },\r\n        MuiTypography: {\r\n            subtitle1: {\r\n                fontWeight: 'bold'\r\n            }\r\n        },\r\n        MuiCheckbox: {\r\n            colorPrimary: {\r\n                color: alpha(primaryColor, 0.5),\r\n                \"&$checked\": {\r\n                    color: primaryColor,\r\n                }\r\n            }\r\n        },\r\n        MuiSwitch: {\r\n            colorPrimary: {\r\n                \"&$checked\": {\r\n                    color: primaryColor,\r\n                }\r\n            }\r\n        },\r\n        MuiTooltip: {\r\n            tooltip: {\r\n                maxWidth: 500,\r\n                fontSize: '1.25rem',\r\n                whiteSpace: 'pre-line',\r\n            }\r\n        },\r\n        MuiCssBaseline: {\r\n            '@global': {\r\n                '*::-webkit-scrollbar': {\r\n                    width: 10,\r\n                    height: 10,\r\n                },\r\n                '*::-webkit-scrollbar-track': {\r\n                    display: 'none',\r\n                },\r\n                '*::-webkit-scrollbar-corner': {\r\n                    display: 'none',\r\n                },\r\n                '*::-webkit-scrollbar-thumb': {\r\n                    backgroundColor: alpha(scrollColor, 0.1),\r\n                    borderRadius: 10,\r\n                },\r\n                '*:hover::-webkit-scrollbar-thumb': {\r\n                    backgroundColor: lighten(scrollColor, 0.2),\r\n                },\r\n                '*::-webkit-scrollbar-thumb:hover': {\r\n                    backgroundColor: scrollColor,\r\n                },\r\n                '*::-webkit-scrollbar-thumb:active': {\r\n                    backgroundColor: darken(scrollColor, 0.2),\r\n                }\r\n            }\r\n        }\r\n    },\r\n    spacing: 10,\r\n}\r\n\r\nexport default theme;\r\n","import snake2word from \"../utils/snake2word\";\r\n\r\nconst constValues = {\r\n    actions: {\r\n        consume: [\r\n            { value: \"consume-present\", label: \"present\" },\r\n            { value: \"consume-discover\", label: \"discover\" },\r\n            { value: \"consume-enjoy\", label: \"enjoy\" },\r\n        ],\r\n        produce: [\r\n            { value: \"produce\", label: \"produce\" }\r\n        ],\r\n        search: [\r\n            { value: \"search-lookup\", label: \"lookup\" },\r\n            { value: \"search-browse\", label: \"browse\" },\r\n            { value: \"search-locate\", label: \"locate\" },\r\n            { value: \"search-explore\", label: \"explore\" },\r\n        ],\r\n        query: [\r\n            { value: \"query-identify\", label: \"identify\" },\r\n            { value: \"query-compare\", label: \"compare\" },\r\n            { value: \"query-summarize\", label: \"summarize\" }\r\n        ],\r\n    },\r\n    targets: {\r\n        Attributes: [\r\n            { value: \"Attributes-values\", label: \"values\" },\r\n            { value: \"Attributes-distribution\", label: \"distribution\" },\r\n            { value: \"Attributes-range\", label: \"range\" },\r\n            { value: \"Attributes-extremes\", label: \"extremes\" },\r\n            { value: \"Attributes-outliers\", label: \"anomalies\" },\r\n            { value: \"Attributes-clusters\", label: \"clusters\" },\r\n            { value: \"Attributes-order\", label: \"order\" },\r\n            { value: \"Attributes-correlation\", label: \"correlation\" },\r\n            { value: \"Attributes-similarity\", label: \"similarity\" }],\r\n        Graphs: [\r\n            { value: \"Graphs-graphs\", label: \"graphs\" },\r\n            { value: \"Graphs-nodes\", label: \"nodes\" },\r\n            { value: \"Graphs-links/paths\", label: \"links/paths\" },\r\n            { value: \"Graphs-topology/structures\", label: \"topology/structures\" },\r\n            { value: \"Graphs-clusters/groups\", label: \"clusters/groups\" }]\r\n    },\r\n    aggregates: [\r\n        { value: \"count\", label: \"count\" },\r\n        { value: \"bin\", label: \"bin\" },\r\n        { value: \"average\", label: \"average\" },\r\n        { value: \"sum\", label: \"sum\" },\r\n        { value: \"median\", label: \"median\" },\r\n        { value: \"variance\", label: \"variance\" },\r\n    ],\r\n    marks: [\r\n        { value: \"bar\", label: \"bar\" },\r\n        { value: \"point\", label: \"scatter plot\" },\r\n        { value: \"line\", label: \"line\" },\r\n        { value: \"rect\", label: \"rect\" },\r\n        { value: \"area\", label: \"area\" },\r\n        { value: \"unit\", label: \"unit\" },\r\n        { value: \"arc\", label: \"pie/donut\" },\r\n        { value: \"sankey\", label: \"sankey\" },\r\n        { value: \"geoshape\", label: \"map\" },\r\n        { value: \"radar\", label: \"radar\" },\r\n        { value: \"tree\", label: \"tree\" },\r\n        { value: \"boxplot\", label: \"boxplot\" },\r\n        { value: \"tick\", label: \"tick\" },\r\n        { value: \"surface\", label: \"surface\" },\r\n        { value: \"text\", label: \"text\" },\r\n        { value: \"treemap\", label: \"treemap\" },\r\n        { value: \"word_cloud\", label: \"word cloud\" },\r\n        { value: \"circle\", label: \"circle\" },\r\n        { value: \"rule\", label: \"rule\" },\r\n        { value: \"image\", label: \"image\" },\r\n        { value: \"dandelion\", label: \"dandelion\" },\r\n        { value: \"icicle\", label: \"icicle\" },\r\n        { value: \"icon\", label: \"icon\" },\r\n        { value: \"storyline\", label: \"storyline\" },\r\n        { value: \"sunburst\", label: \"sunburst\" },\r\n        { value: \"venn\", label: \"venn\" },\r\n        { value: \"calendar\", label: \"calendar\" },\r\n        { value: \"contour\", label: \"contour\" },\r\n        { value: \"graph\", label: \"graph\" },\r\n        { value: \"matrix\", label: \"matrix\" },\r\n        { value: \"vector\", label: \"vector\" },\r\n        { value: \"others\", label: \"others\" },],\r\n    dataTypes: [\r\n        { value: \"quantitative\", label: \"quantitative\" },\r\n        { value: \"nominal\", label: \"nominal\" },\r\n        // { value: \"node\", label: \"node\" },\r\n        { value: \"temporal\", label: \"temporal\" },\r\n        // { value: \"relation\", label: \"relation\" },\r\n        { value: \"ordinal\", label: \"ordinal\" }],\r\n    compositions: [\r\n        { value: \"nested\", label: \"nested\" },\r\n        { value: \"layer\", label: \"layer\" },\r\n        { value: \"facet\", label: \"facet\" },\r\n        { value: \"concat\", label: \"concat\" },\r\n    ],\r\n    channels: [\r\n        { value: \"x\", label: \"x\" },\r\n        { value: \"y\", label: \"y\" },\r\n        { value: \"color\", label: \"color\" },\r\n        { value: \"node\", label: \"node\" },\r\n        { value: \"link\", label: \"link\" },\r\n        { value: \"theta\", label: \"theta\" },\r\n        { value: \"size\", label: \"size\" },\r\n        { value: \"radius\", label: \"radius\" },\r\n        { value: \"unit\", label: \"unit\" },\r\n        { value: \"text\", label: \"text\" },\r\n        { value: \"xoffset\", label: \"xoffset\" }]\r\n}\r\n\r\nexport default constValues;\r\n","import strings from \"./strings\"\r\nimport theme from \"./theme\";\r\nimport constValues from \"./const\";\r\nimport colors from \"./colors\";\r\n\r\nconst R = {\r\n    strings,\r\n    theme,\r\n    const: constValues,\r\n    colors,\r\n}\r\n\r\nexport default R;\r\n","const strings = {\r\n    systemName: \"VAID: Indexing View Designs in Visual Analytics System\",\r\n}\r\n\r\nexport default strings;\r\n","const colors = {\r\n    'tree': '#e8c7c7',\r\n    'graph': '#d8a3a3',\r\n    'treemap': '#c87e7e',\r\n    'hierarchical_edge_bundling': '#b85a5a',\r\n    'sunburst_icicle': '#a93636',\r\n    'line_chart': '#d8bea3',\r\n    'parallel_coordinate': '#c8a47e',\r\n    'polar_plot': '#b88a5a',\r\n    'storyline': '#a97036',\r\n    'flow_diagram': '#c8c87e',\r\n    'chord_diagram': '#b8b85a',\r\n    'sankey_diagram': '#a9a936',\r\n    'map': '#70a936',\r\n    'heatmap': '#7ec87e',\r\n    'unit_visualization': '#5ab85a',\r\n    'glyph_based': '#36a936',\r\n    'scatterplot': '#36a970',\r\n    'matrix': '#7ec8c8',\r\n    'table': '#5ab8b8',\r\n    'small_multiple': '#36a9a9',\r\n    'pie_chart': '#7ea4c8',\r\n    'sector_chart': '#5a8ab8',\r\n    'donut_chart': '#3670a9',\r\n    'error_bar': '#7e7ec8',\r\n    'box_plot': '#5a5ab8',\r\n    'stripe_graph': '#3636a9',\r\n    'bar_chart': '#7036a9',\r\n    'area_chart': '#b85ab8',\r\n    'proportional_area_chart': '#a936a9',\r\n    'word_cloud': '#a93670',\r\n    \"contour_graph\": '#d8bea3',\r\n    \"surface_graph\": '#b88a5a',\r\n    \"vector_graph\": '#a97036',\r\n    'scivis': '#c8c87e',\r\n    'others': '#d3d3d3'\r\n}\r\nexport default colors;\r\n","import React from 'react';\r\nimport {Checkbox, ListItemText, ListSubheader, MenuItem, TextField, Typography} from \"@material-ui/core\";\r\n\r\nfunction ItemSelect({title, value, onChange, options, twolevel=false}) {\r\n    const val2label = val => {\r\n        if (twolevel){\r\n            let label = null\r\n            Object.keys(options).forEach((key) => {\r\n                if (label === null){\r\n                    const idx = options[key].findIndex(option => option.value === val);\r\n                    if (idx != -1) label = options[key][idx].label;\r\n                }\r\n            })\r\n            if (label == null) return val; else return label\r\n        }\r\n        else{\r\n            const idx = options.findIndex(option => option.value === val);\r\n            if (idx === -1) return val;\r\n            return options[idx].label;\r\n        }\r\n    }\r\n    const wrapper = React.createRef();\r\n\r\n    return <div ref={wrapper} style={{padding: '0px 15px 0px 10px'}}>\r\n        {title && <Typography variant={\"subtitle1\"}>{title}</Typography>}\r\n        <TextField select\r\n                        SelectProps={{\r\n                            multiple: true,\r\n                            renderValue: selected => selected.map(val => val2label(val)).join(', '),\r\n                        }}\r\n                        style={{width: 200}}\r\n                        value={value}\r\n                        onChange={onChange}>\r\n            {!twolevel && options.map((option) => (\r\n            <MenuItem key={option.value} value={option.value}>\r\n                <Checkbox checked={value.includes(option.value)}/>\r\n                <ListItemText primary={option.label}/>\r\n            </MenuItem>\r\n            ))}\r\n            {twolevel && Object.keys(options).map((l1) => (\r\n                    [<ListSubheader >{l1}</ListSubheader>,\r\n                    options[l1].map((option) =>(\r\n                        <MenuItem key={`${option.value}`} value={`${option.value}`}>\r\n                            <Checkbox checked={value.includes(option.value)}/>\r\n                            <ListItemText primary={option.label}/>\r\n                        </MenuItem>))]\r\n            ))}\r\n        </TextField>\r\n    </div>\r\n}\r\n\r\nexport default React.memo(ItemSelect);\r\n","import React, {useState} from 'react';\r\nimport {Button, Checkbox, Input, makeStyles, MenuItem, Select, Typography} from \"@material-ui/core\";\r\nimport {inject, observer} from \"mobx-react\";\r\nimport R from \"../../../res\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    fieldCheckbox: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        alignItems: 'center',\r\n    },\r\n    text: {\r\n        display: 'flex',\r\n        flex: 1,\r\n        overflow: 'hidden',\r\n        border: `1px solid ${theme.palette.primary.main}`,\r\n        borderRadius: theme.shape.borderRadius,\r\n    },\r\n    type: {\r\n        margin: theme.spacing(0, 1),\r\n        minWidth: 0,\r\n        padding: theme.spacing(0, 1),\r\n        flex: 0,\r\n    },\r\n    name: {},\r\n    selectInput: {\r\n        display: 'none',\r\n    }\r\n}));\r\n\r\nfunction FieldCheckbox({\r\n                           type,\r\n                           name,\r\n                           editable,\r\n                           checked,\r\n                           onChange,\r\n                           onChangeType,\r\n                       }) {\r\n    const classes = useStyles();\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const handleOpen = () => setOpen(true);\r\n    const handleClose = () => setOpen(false);\r\n\r\n    const handleChange = e => onChangeType(name, e.target.value);\r\n\r\n    return <div className={classes.fieldCheckbox}>\r\n        <div className={classes.text}>\r\n            <Button className={classes.type} variant={\"text\"} size={\"small\"}\r\n                    onClick={handleOpen}>\r\n                {type}\r\n            </Button>\r\n            <Typography className={classes.name} noWrap>#{name}</Typography>\r\n        </div>\r\n        <Checkbox color=\"primary\"\r\n                  disabled={!editable}\r\n                  checked={checked && editable}\r\n                  onChange={onChange}/>\r\n        <Select open={open}\r\n                onClose={handleClose}\r\n                onOpen={handleOpen}\r\n                value={type}\r\n                input={<Input className={classes.selectInput}/>}\r\n                onChange={handleChange}>\r\n            {R.const.fieldTypes.map(fT => <MenuItem key={fT.value} value={fT.value}>{fT.label}</MenuItem>)}\r\n        </Select>\r\n    </div>\r\n}\r\n\r\nexport default inject()(observer(FieldCheckbox));\r\n","import React from \"react\";\r\nimport {Switch, FormControlLabel } from '@material-ui/core';\r\nimport {inject, observer} from \"mobx-react\";\r\nimport Editor from \"@monaco-editor/react\";\r\n\r\nfunction SpecInput({store}) {\r\n\r\n  const inputChange = (newValue, event) => {\r\n    store.setSpecInter(newValue)\r\n    // store.setQueryParams({vegaSpec: e.target.value})\r\n  }\r\n\r\n  const options = {\r\n    selectOnLineNumbers: true,\r\n    // readOnly: true\r\n  };\r\n\r\n  return (\r\n    <div style={{display: 'block', width: '100%'}}>\r\n      <FormControlLabel\r\n          control={<Switch \r\n            checked={store.queryParams.useSpec}\r\n            onChange={(e) => store.setQueryParams({useSpec: e.target.checked})}\r\n            color=\"primary\" \r\n            name=\"search by specification\" />}\r\n          label=\"Use Specification\"\r\n          style={{padding: \"10px\"}}\r\n        />\r\n    <Editor\r\n      height=\"30vh\"\r\n      defaultLanguage=\"json\"\r\n      options={options}\r\n      onChange={inputChange}\r\n      value={store.vegaSpecInter}\r\n      defaultValue={JSON.stringify({\r\n        \"x\": {\r\n            \"type\":\"*\"\r\n        },\r\n        \"y\": {\r\n            \"type\":\"*\"\r\n        }\r\n    }, null, 4)}\r\n    />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default inject(\"store\")(observer(SpecInput));\r\n","import React from 'react';\r\nimport {Button, makeStyles, TextField, Tooltip, Typography} from \"@material-ui/core\";\r\nimport {inject, observer} from \"mobx-react\";\r\nimport QueryItem from \"./QueryItem\";\r\nimport {Refresh} from \"@material-ui/icons\";\r\nimport DualSwitch from \"./DualSwitch\";\r\nimport R from \"../../../res\";\r\nimport ItemSelect from \"./ItemSelect\";\r\nimport FieldCheckbox from \"./FieldCheckbox\";\r\nimport SpecInput from \"./SpecInput\"\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    queryPanel: {\r\n        width: '100%',\r\n        height: '100%',\r\n        overflow: 'hidden',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n    },\r\n    itemContainer:{\r\n        height: '30vh',\r\n        width: '100%',\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'start'\r\n    }\r\n}));\r\n\r\nfunction QueryPanel({store}) {\r\n    const classes = useStyles();\r\n\r\n    return <div className={classes.queryPanel}>\r\n        <QueryItem title={\"Filters\"}>\r\n            <div className={classes.itemContainer}>\r\n                <ItemSelect title={\"Task: Action\"}\r\n                            value={store.queryParams.actions}\r\n                            onChange={e => store.setQueryParams({actions: e.target.value})}\r\n                            options={R.const.actions}\r\n                            twolevel/>\r\n                <ItemSelect title={\"Task: Target\"}\r\n                            value={store.queryParams.targets}\r\n                            onChange={e => store.setQueryParams({targets: e.target.value})}\r\n                            options={R.const.targets}\r\n                            twolevel/>\r\n                <ItemSelect title={\"Layout\"}\r\n                            value={store.queryParams.compositions}\r\n                            onChange={e => store.setQueryParams({compositions: e.target.value})}\r\n                            options={R.const.compositions}/>\r\n                <ItemSelect title={\"Visualization\"}\r\n                            value={store.queryParams.marks}\r\n                            onChange={e => store.setQueryParams({marks: e.target.value})}\r\n                            options={R.const.marks.sort((a, b) => (a.label > b.label) ? 1 : -1)}/>\r\n                <ItemSelect title={\"Visual Channel\"}\r\n                            value={store.queryParams.channels}\r\n                            onChange={e => store.setQueryParams({channels: e.target.value})}\r\n                            options={R.const.channels}/>\r\n                <ItemSelect title={\"Data Type\"}\r\n                            value={store.queryParams.dataTypes}\r\n                            onChange={e => store.setQueryParams({dataTypes: e.target.value})}\r\n                            options={R.const.dataTypes}/>\r\n                {/* <ItemSelect title={\"Aggregate\"}\r\n                            value={store.queryParams.aggregates}\r\n                            onChange={e => store.setQueryParams({aggregates: e.target.value})}\r\n                            options={R.const.aggregates}/> */}\r\n            </div>\r\n        </QueryItem>\r\n        \r\n        <QueryItem title={\"JSON Specification\"}>\r\n            <SpecInput />\r\n        </QueryItem>\r\n\r\n        <QueryItem placeholder/>\r\n        <QueryItem action>\r\n            <Button variant={\"outlined\"} onClick={() => {\r\n                store.generateRecommendationsFromQueryParams();\r\n            }}>Search</Button>\r\n        </QueryItem>\r\n        <QueryItem action>\r\n            <Button variant={\"text\"} endIcon={<Refresh/>} onClick={store.resetQueryParams}>Reset</Button>\r\n        </QueryItem>\r\n    </div>\r\n}\r\n\r\nexport default inject(\"store\")(observer(QueryPanel));\r\n","import React from 'react';\r\nimport {IconButton, makeStyles} from \"@material-ui/core\";\r\nimport clsx from \"clsx\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    actionBox: {\r\n        position: 'relative',\r\n        \"&:hover > $actions\": {\r\n            opacity: 1,\r\n        }\r\n    },\r\n    actions: {\r\n        position: 'absolute',\r\n        right: 0,\r\n        top: 0,\r\n        maxWidth: '100%',\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n        opacity: 0,\r\n        transition: 'opacity .3s linear',\r\n    },\r\n    action: {\r\n        flex: 0,\r\n        margin: theme.spacing(0.5),\r\n    }\r\n}));\r\n\r\nfunction ActionBox({actions, className, children}) {\r\n    const classes = useStyles();\r\n\r\n    return <div className={clsx(classes.actionBox, className)}>\r\n        {children}\r\n        <div className={classes.actions}>\r\n            {actions.map((action, aId) => <div key={aId} className={classes.action}>\r\n                <IconButton size={\"small\"} onClick={action.click}>\r\n                    {action.icon}\r\n                </IconButton>\r\n            </div>)}\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default ActionBox;\r\n","import React from 'react';\r\nimport {makeStyles, Paper, Popover, Tooltip, Typography} from \"@material-ui/core\";\r\nimport {inject, observer} from \"mobx-react\";\r\nimport ActionBox from \"../../components/ActionBox\";\r\nimport {InfoOutlined, Loupe, Star, StarHalf} from \"@material-ui/icons\";\r\nimport useView from \"../../hooks/useView\";\r\nimport Image from \"../../components/Image\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    recommendation: {\r\n        minWidth: 300,\r\n        width: '100%',\r\n        height: 200,\r\n        backgroundColor: theme.palette.background.default,\r\n        display: 'flex',\r\n        padding: theme.spacing(1, 0.5, 1, 1),\r\n    },\r\n    image: {\r\n        flex: '1 1 0',\r\n        width: 0,\r\n    },\r\n    imagePreview: {\r\n        maxHeight: '60vh',\r\n        maxWidth: '60vw',\r\n    },\r\n    popover: {\r\n        pointerEvents: 'none',\r\n    },\r\n    paper: {\r\n        padding: theme.spacing(1),\r\n        width: '30vw',\r\n        textAlign: \"center\",\r\n    },\r\n    popoverText: {\r\n        textAlign: 'left',\r\n    },\r\n    info: {\r\n        flex: '1 1 0',\r\n        width: 0,\r\n        margin: theme.spacing(1, 1, 1, 0.5),\r\n        overflow: 'hidden auto',\r\n    },\r\n    title: {\r\n        verticalAlign: 'Bottom',\r\n        display: 'inline-flex',\r\n    },\r\n    icon: {\r\n        fontSize: '1.25rem',\r\n        margin: `4px 2px`,\r\n    },\r\n    text: {\r\n        marginLeft: 24,\r\n        '& + $title': {\r\n            marginTop: theme.spacing(1),\r\n        }\r\n    },\r\n}));\r\n\r\n\r\nfunction Recommendation({rec, store}) {\r\n    const classes = useStyles();\r\n\r\n    const view = useView(rec.viewId);\r\n\r\n    const handleDragStart = (ev) => {\r\n        ev.dataTransfer.setData(\"viewId\", rec.viewId);\r\n        ev.dataTransfer.dropEffect = \"copy\";\r\n    };\r\n\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n    const handlePopoverOpen = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handlePopoverClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const open = Boolean(anchorEl);\r\n\r\n    return <ActionBox actions={[\r\n        {\r\n            icon: <Loupe/>, click: e => {\r\n                e.preventDefault();\r\n                store.showViewDetail(view.figId, view.viewId)\r\n            }\r\n        }\r\n    ]}>\r\n        <Paper elevation={4} className={classes.recommendation} draggable onDragStart={handleDragStart}>\r\n            <Image src={view.viewFile} alt={view.viewFile} className={classes.image}\r\n                   onMouseEnter={handlePopoverOpen}\r\n                   onMouseLeave={handlePopoverClose}/>\r\n            <Popover className={classes.popover}\r\n                     classes={{paper: classes.paper}}\r\n                     open={open}\r\n                     anchorEl={anchorEl}\r\n                     anchorOrigin={{\r\n                         vertical: 'bottom',\r\n                         horizontal: 'center',\r\n                     }}\r\n                     transformOrigin={{\r\n                         vertical: 'top',\r\n                         horizontal: 'center',\r\n                     }}\r\n                     onClose={handlePopoverClose}\r\n                     disableRestoreFocus>\r\n                <img className={classes.imagePreview} src={view.viewFile} alt={view.viewFile}/>\r\n            </Popover>\r\n        </Paper>\r\n    </ActionBox>\r\n}\r\n\r\nexport default inject('store')(observer(Recommendation));\r\n","import React, {useRef} from 'react';\r\nimport {makeStyles} from \"@material-ui/core\";\r\nimport {inject, observer} from \"mobx-react\";\r\nimport Recommendation from \"./Recommendation\";\r\nimport {useSize} from \"ahooks\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    recommendationsPanel: {\r\n        overflow: \"hidden scroll\",\r\n        width: '100%',\r\n        height: '100%',\r\n        paddingLeft: theme.spacing(0.5),\r\n        paddingRight: theme.spacing(1),\r\n        display: 'grid',\r\n        gridTemplateColumns: props => `repeat(${Math.floor((props.width - theme.spacing(2)) / (300 + theme.spacing(2)))}, 1fr)`,\r\n        gridTemplateRows: `repeat(auto-fill, 200px)`,\r\n        gap: theme.spacing(2),\r\n        justifyContent: \"space-evenly\",\r\n    },\r\n}));\r\n\r\nfunction RecommendationsPanel({store}) {\r\n    const cRef = useRef();\r\n    const {width} = useSize(cRef);\r\n\r\n    const classes = useStyles({width});\r\n\r\n    return <div className={classes.recommendationsPanel} ref={cRef}>\r\n        {store.recommendations.map(rec => <Recommendation key={rec.viewId}\r\n                                                          rec={rec}/>)}\r\n    </div>\r\n}\r\n\r\nexport default inject('store')(observer(RecommendationsPanel));\r\n","import React from 'react';\r\nimport {makeStyles, Typography} from \"@material-ui/core\";\r\nimport {inject, observer} from \"mobx-react\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    panel: {\r\n        position: 'absolute',\r\n        backgroundColor: theme.palette.background.paper,\r\n        borderRadius: theme.shape.borderRadius,\r\n    },\r\n    title: {\r\n        margin: '4px auto 4px 10px'\r\n    },\r\n    content: {\r\n        position: 'absolute',\r\n        top: 40,\r\n        bottom: theme.spacing(1),\r\n        left: theme.spacing(1),\r\n        right: theme.spacing(1),\r\n        overflow: 'hidden',\r\n    }\r\n}));\r\n\r\nfunction Panel({title, pos, children}) {\r\n    const classes = useStyles();\r\n\r\n    return <div className={classes.panel}\r\n                style={pos}>\r\n        <Typography variant={\"h6\"}\r\n                    className={classes.title}>{title}</Typography>\r\n        <div className={classes.content}>\r\n            {children}\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default inject()(observer(Panel));\r\n","import React, {useRef} from 'react';\r\nimport {makeStyles} from \"@material-ui/core\";\r\nimport {inject, observer} from \"mobx-react\";\r\nimport {useSize} from \"ahooks\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    outerArea: {\r\n        position: 'relative',\r\n        width: '100%',\r\n        height: '100%',\r\n    },\r\n    innerContainer: {\r\n        position: 'absolute',\r\n        left: '50%',\r\n        top: '50%',\r\n        transform: 'translate(-50%, -50%)'\r\n    },\r\n}));\r\n\r\nfunction getMaxBox(width, height, ratio) {\r\n    if (!width || !height || !ratio) return [0, 0];\r\n\r\n    if (height * ratio > width) return [width, width / ratio];\r\n    else return [height * ratio, height];\r\n}\r\n\r\nfunction AspectRatioKeeper({ratio, children}) {\r\n    const classes = useStyles();\r\n    const rootRef = useRef();\r\n    const {width, height} = useSize(rootRef);\r\n\r\n    const [ctnW, ctnH] = getMaxBox(width, height, ratio);\r\n\r\n    return <div className={classes.outerArea}\r\n                ref={rootRef}>\r\n        <div className={classes.innerContainer}\r\n             style={{\r\n                 width: ctnW,\r\n                 height: ctnH,\r\n             }}>\r\n            {children}\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default inject()(observer(AspectRatioKeeper));\r\n","import React from 'react';\r\nimport {Backdrop, CircularProgress, makeStyles} from \"@material-ui/core\";\r\nimport {inject, observer} from \"mobx-react\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    backdrop: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n        color: '#fff',\r\n    }\r\n}));\r\n\r\nfunction Waiting({store}) {\r\n    const classes = useStyles();\r\n\r\n    return <Backdrop className={classes.backdrop} open={store.waiting}>\r\n        <CircularProgress color=\"inherit\" />\r\n    </Backdrop>\r\n}\r\n\r\nexport default inject('store')(observer(Waiting));\r\n","import { inject, observer } from \"mobx-react\";\r\nimport { Typography, Dialog, DialogTitle, DialogContent, DialogContentText } from \"@material-ui/core\";\r\nimport packageJson from \"../../../package.json\";\r\n\r\n\r\nfunction Introduction({ store }) {\r\n\r\n\r\n\r\n\treturn <Dialog\r\n\t\tonClose={store.handleReadMeClose}\r\n\t\topen={store.isReadMeOpen}\r\n\t\tmaxWidth='lg'\r\n\t\tfullWidth>\r\n\t\t<DialogTitle>Introduction to VAID</DialogTitle>\r\n\t\t<DialogContent>\r\n\t\t\t<embed\r\n\t\t\t\tsrc={packageJson.homepage + \"/codebook_VAID.pdf#toolbar=0&navpanes=0&scrollbar=0\"}\r\n\t\t\t\tstyle={{width: '100%', height: '800px'}}\r\n\t\t\t></embed>\r\n\t\t\t{/* <DialogContentText>\r\n\t\t\t\tHere is the introduction to KB4VA specifications, including analytical task specifications and design specification.\r\n\t\t\t</DialogContentText>\r\n\t\t\t<Typography variant='h5'>Analytical Tasks</Typography>\r\n\t\t\t<DialogContentText>\r\n\t\t\t\tThe categorization of analytical tasks is based on Brehmer M, Munzner T. A multi-level typology of abstract visualization tasks[J]. IEEE transactions on visualization and computer graphics, 2013, 19(12): 2376-2385. Specifically, a task is described as a pair of \"action\" and \"target\".\r\n\t\t\t</DialogContentText>\r\n\t\t\t<img src={process.env.PUBLIC_URL + \"/action-target.png\"} style={{maxWidth: '800px'}}></img>\r\n\t\t\t<DialogContentText>\r\n\t\t\tThe Figure is from Munzner T. Visualization analysis and design[M]. CRC press, 2014. Page 46 and Page 56.\r\n\t\t\t</DialogContentText>\r\n\t\t\t<Typography variant='h6'>Actions</Typography>\r\n\t\t\t<DialogContentText>\r\n\t\t\t\tThe following definitions of actions are directly quoted from Brehmer and Munzner's multi-level typology.\r\n\t\t\t</DialogContentText>\r\n\t\t\t<ul>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<b>Consume</b>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t<li><b>Present</b> refers to \"the use of visualization for the succinct communication of information, for telling a story with data, guiding an audience through a series of cognitive operations\".</li>\r\n\t\t\t\t\t\t<li><b>Discover</b> is \"about the generation and verification of hypotheses, associated with modes of scientific inquiry\".</li>\r\n\t\t\t\t\t\t<li><b>Enjoy</b> refers to casual encounters with visualization</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<b>Produce</b>: We use produce in reference to \"tasks in which the intent is to generate new artifacts, including transformed or derived data, annotations, recorded visualization interactions, or screenshots of static visualizations\".\r\n\t\t\t\t</li>\r\n\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<b>Search</b>: Search includes four different types which is categorized based on the targets and locations.\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t<li>Lookup: target known, location known</li>\r\n\t\t\t\t\t\t<li>Browse: target unknown, location known</li>\r\n\t\t\t\t\t\t<li>Locate: target known, location unknown</li>\r\n\t\t\t\t\t\t<li>Explore: target unknown, location unknown</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<b>Query</b>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t<li>Identify: \"returns characteristics or reference for a target\"</li>\r\n\t\t\t\t\t\t<li>Compare: \"returns characteristics or reference for two or multiple targets\"</li>\r\n\t\t\t\t\t\t<li>Summarize: \"returns characteristics or reference for a whole set of targets\"</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</li>\r\n\t\t\t</ul> */}\r\n\t\t</DialogContent>\r\n\t</Dialog>\r\n}\r\n\r\nexport default inject('store')(observer(Introduction));","import { inject, observer } from \"mobx-react\";\r\nimport FigureViewer from \"./views/FigureViewer\";\r\nimport { AppBar, Button, makeStyles, Toolbar, Typography, useTheme } from \"@material-ui/core\";\r\n// import DialogContent from '@mui/material/DialogContent';\r\n// import DialogContentText from '@mui/material/DialogContentText';\r\nimport QueryPanel from \"./views/QueryPanel\";\r\nimport RecommendationsPanel from \"./views/RecommendationsPanel\";\r\nimport Panel from \"./components/Panel\";\r\nimport R from \"../res\";\r\nimport AspectRatioKeeper from \"./components/AspectRatioKeeper\";\r\nimport Waiting from \"./components/Waiting\";\r\nimport Introduction from \"./views/Introduction\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        width: '100vw',\r\n        height: '100vh',\r\n        backgroundColor: theme.palette.primary.light,\r\n    },\r\n    content: {\r\n        position: 'relative',\r\n        width: '100vw',\r\n        height: 'calc(100vh - 48px)',\r\n    },\r\n    flex: {\r\n        flex: 1,\r\n    }\r\n}));\r\n\r\nfunction App({ store }) {\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n\r\n    return <div className={classes.root}>\r\n        <AppBar position=\"static\">\r\n            <Toolbar variant=\"dense\">\r\n                <Typography variant=\"h5\" color=\"inherit\" component=\"div\">{R.strings.systemName}</Typography>\r\n                <div className={classes.flex} />\r\n                <Button color={\"inherit\"} onClick={store.handleReadMeOpen}>ReadMe</Button>\r\n                <Introduction/>\r\n            </Toolbar>\r\n        </AppBar>\r\n        <div className={classes.content}>\r\n            <AspectRatioKeeper ratio={1920 / 1032}>\r\n                <Panel title=\"Query Panel\"\r\n                    pos={{\r\n                        top: theme.spacing(1),\r\n                        bottom: theme.spacing(1),\r\n                        left: theme.spacing(1),\r\n                        width: 500,\r\n                    }}\r\n                    bgColor={theme.palette.primary.light}>\r\n                    <QueryPanel />\r\n                </Panel>\r\n                <Panel title={`Retrieved Visualizations: ${store.recommendations.length} found`}\r\n                    pos={{\r\n                        top: theme.spacing(1),\r\n                        bottom: `${theme.spacing(2)}px`,\r\n                        left: theme.spacing(2) + 500,\r\n                        right: theme.spacing(1),\r\n                    }}\r\n                    bgColor={theme.palette.primary.light}>\r\n                    <RecommendationsPanel />\r\n                </Panel>\r\n                {/* <Panel title=\"Selected Visualizations\"\r\n                       pos={{\r\n                           height: '30%',\r\n                           bottom: theme.spacing(1),\r\n                           left: theme.spacing(2) + 500,\r\n                           right: theme.spacing(1),\r\n                       }}>\r\n                    <ViewList/>\r\n                </Panel> */}\r\n            </AspectRatioKeeper>\r\n        </div>\r\n        <FigureViewer />\r\n        {/* <TableViewer/> */}\r\n        <Waiting />\r\n    </div>;\r\n}\r\n\r\nexport default inject(\"store\")(observer(App));\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './app/App';\r\nimport {Provider} from \"mobx-react\";\r\nimport store from \"./store\";\r\nimport {createTheme, CssBaseline, MuiThemeProvider} from \"@material-ui/core\";\r\nimport R from \"./res\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n      <Provider store={store}>\r\n          <MuiThemeProvider theme={createTheme(R.theme)}>\r\n              <CssBaseline/>\r\n              <App />\r\n          </MuiThemeProvider>\r\n      </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}